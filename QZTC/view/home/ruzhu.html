<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../../css/mui.picker.css" />
		<link rel="stylesheet" type="text/css" href="../../css/mui.poppicker.css" />
		<link href="../../css/view-css/home/ruzhu.css" rel="stylesheet">
	</head>
	<style type="text/css">
		#popover {
			width: 100%;
			/*	height:40rem;*/
			background: white;
			position: fixed;
			bottom: 0%;
			border-radius: 0;
			z-index: 1100;
		}

		#yezftc {
			position: fixed;
			top: 0;
			background: #F0F0F0;
			width: 100%;
			height: 100%;
			border-radius: 0;
			z-index: 1111;
			/*opacity: 0.9;*/

		}
	</style>
	<body>

		<header class="mui-bar mui-bar-nav">
			<a style="color: #000000" class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title"></h1>
		</header>
		<div class="mui-content">

			<div class="info">

				<div class="title">
					<div class="title-span">
						<span>标题</span>
					</div>
					<div class="title-input">
						<input type="text" name="title" placeholder="请输入店铺标题" />
					</div>
				</div>

				<div class="corporate">
					<div class="corporate-span">
						<span>机构名称</span>
					</div>
					<div class="corporate-input">
						<input type="text" name="corporate" placeholder="请输入公司名称或店铺名称" />
					</div>
				</div>

				<div class="phone">
					<div class="phone-span">
						<span>联系电话</span>
					</div>
					<div class="phone-input">
						<input type="text" name="phone" placeholder="请输入联系电话" />
					</div>
				</div>

				<div class="sort">
					<div class="sort-span">
						<span>店铺类型</span>
					</div>
					<div class="sort-input">
						<!-- <input  type="text" name="sort" placeholder="请选择分类"  /> -->
						<select id="sort" onchange="storeTypeChange()">
							<option value="-1">请选择店铺类型</option>
						</select>
					</div>
				</div>
				<!-- 入驻 -->
				<!-- <div class="start">
					<div class="title-span">
						<span>入驻开始</span>
					</div>
					<div class="start-date">
						<input style="border: 0rem;" type="text" name="start-date" id="start-date" placeholder="请选择开始日期" />
					</div>
				</div>

				<div class="end">
					<div class="title-span">
						<span>入驻结束</span>
					</div>
					<div class="end-date">
						<input style="border: 0rem;" type="text" name="end-date" id="end-date" placeholder="请选择结束日期" />
					</div>
				</div> -->

				<div class="settle">
					<div class="title-span">
						<span>入驻月数</span>
					</div>
					<div class="sort-input">
						<!-- <input  type="text" name="sort" placeholder="请选择分类"  /> -->
						<select id="settle-date" onchange="calculateMoneyChange()">
							<option value="-1">请选择入驻月数</option>
						</select>
					</div>
				</div>
				<!-- 置顶 -->
				<div class="sort">
					<div class="sort-span">
						<span>置顶</span>
					</div>
					<div class="sort-input">
						<!-- <input  type="text" name="sort" placeholder="请选择分类"  /> -->
						<select id="is-top">
							<option value="-1">请选择是否置顶</option>
						</select>
					</div>
				</div>

				<div class="start">
					<div class="title-span">
						<span>置顶开始</span>
					</div>
					<div class="top-start-date">
						<input style="border: 0rem;" type="text" name="top-start-date" id="top-start-date" placeholder="请选择置顶开始日期" />
					</div>
				</div>

				<div class="settle">
					<div class="title-span">
						<span>置顶月数</span>
					</div>
					<div class="sort-input">
						<select id="top-month" onchange="calculateMoneyChange()">
							<option value="-1">请选择置顶月数</option>
						</select>
					</div>
				</div>
				<!-- 猜你喜欢 -->
				<div class="sort">
					<div class="sort-span">
						<span>猜你喜欢</span>
					</div>
					<div class="sort-input">
						<!-- <input  type="text" name="sort" placeholder="请选择分类"  /> -->
						<select id="is-like">
							<option value="-1">请选择是否猜你喜欢</option>
						</select>
					</div>
				</div>

				<div class="start">
					<div class="title-span">
						<span>猜你喜欢开始</span>
					</div>
					<div class="like-start-date">
						<input style="border: 0rem;" type="text" name="like-start-date" id="like-start-date" placeholder="请选择开始日期" />
					</div>
				</div>

				<div class="settle">
					<div class="title-span">
						<span>猜你喜欢月数</span>
					</div>
					<div class="sort-input">
						<!-- <input  type="text" name="sort" placeholder="请选择分类"  /> -->
						<select id="like-month" onchange="calculateMoneyChange()">
							<option value="-1">请选择</option>
						</select>
					</div>
				</div>

				<div class="rent">
					<div class="title-span">
						<span>总金额</span>
					</div>
					<div class="rent-input">
						<span id="money" class="rent-money">总金额</span>
					</div>
				</div>

				<div class="area">
					<div class="area-span">
						<span>区域位置</span>
					</div>
					<div class="area-input">
						<input type="text" name="area" id="address-ipt" placeholder="请选择店铺区域位置" />
					</div>
				</div>

				<div class="address-detail">
					<div class="address-detail-span">
						<span>详细地址</span>
					</div>
					<div class="address-detail-input">
						<input type="text" name="address-detail" placeholder="请填写店铺的详细地址" />
					</div>
				</div>

				<div class="depict">
					<div class="depict-span">
						<span>描述</span>
					</div>
					<div class="depict-input">
						<input type="text" name="depict" placeholder="请简单描述店铺服务内容" />
					</div>
				</div>

				<div class="fm-img">
					<div class="fm-img-span">
						<span>封面图</span>
					</div>
					<div class="fm-img-div">
						<img id="fm-img-click" class="fm-img-base" src="../../img/paizhao.png">
						<span class='fm-ck'>请点击确认</span>
					</div>
					<img src="" style="display: none;" val="" class="fm-ys">
				</div>

				<div val="" class="xq-btn">
					请点击确认
				</div>
				<div class="xq-img">
					<div class="xq-img-span">
						<span>详情图</span>
					</div>
					<div class="xq-img-div">
						<img id="xq-img-click" class="xq-img-base" src="../../img/paizhao.png">
						<!-- <span class='xq-ck'>请点击确认</span> -->
					</div>
					<!-- <img src="" style="display: none;" val="" class="xq-ys"> -->
				</div>

				<div val="" class="lbt-btn">
					请点击确认
				</div>
				<div class="lbt-img">
					<div class="lbt-img-span">
						<span>轮播图</span>
					</div>
					<div class="lbt-img-div">
						<img id="lbt-img-click" class="lbt-img-base" src="../../img/paizhao.png">
					</div>
				</div>


			</div>
			<div id="fabu-click" class="bottom">
				<span>发布</span>
			</div>

			<!--支付选择-->
			<div id="popover" class="mui-popover">
				<div class="title-fkfs">
					<span>选择付款方式</span>

				</div>
				<div class="Payment-type">
					<!--余额-->
					<div class="remainingsum">
						<img src="../../img/zfb.png" />
						<span>支付宝 </span>
						<input type="radio" checked name="payment" value="1" />
					</div>
					<!--支付宝-->

					<div class="Alipay">
						<img src="../../img/wx.png" />
						<span>微信</span>
						<input type="radio" name="payment" value="2" />
					</div>

					<!--微信-->
					<!-- <div class="Wechat">
						<img src="../../img/wx.png"/>
						<span>微信</span>
						<input type="radio" name="payment" value="3" />
					</div> -->
				</div>
				<div class="bt-fk">
					<button id="bt-fk">立即支付</button>
				</div>
			</div>

		</div>

		<script src="../../js/mui.min.js"></script>
		<script src="../../js/jquery.min.js"></script>
		<script src="../../js/rem.js"></script>
		<script src="../../js/page.js"></script>
		<script src="../../js/mui.picker.js"></script>
		<script src="../../js/mui.poppicker.js"></script>
		<script src="../../js/city.data-3.js"></script>
		<script src="../../js/jquery.form.js"></script>
		<script src="../../js/view-js/home/ruzhu.js"></script>

		<script type="text/javascript">
			mui.init()

			var sort_list = [];
			var top_list = [];
			var ruzhu_list = [];
			var like_list = [];
			
			document.addEventListener("plusready", function() {
				plus.nativeUI.showWaiting();
				var qs = getQueryString();
				var id = qs["id"];

				var token = window.localStorage.getItem('qztc');
				

				mui.ajax(APIPATH + 'Enter/enterinfo', {
					data: {
						sort_id: id
					},
					dataType: 'json', //服务器返回json格式数据
					type: 'post', //HTTP请求类型
					timeout: 10000, //超时时间设置为10秒；
					// headers:{'Content-Type':'application/json'},
					success: function(data) {
						// console.log('店铺分类：' + JSON.stringify(data))
						var datas = data.data;
						sort_list = datas.sort;
						var sorthh = '<option value ="-1">请选择分类</option>';
						var sort = data.data.title.id;

						for (i = 0; i < datas.sort.length; i++) {
							// console.log(datas.sort[i]['name']);
							sorthh += '<option value ="' + datas.sort[i]['id'] + '" price="' + datas.sort[i]['rental_price']+ '" like_price="'+ datas.sort[i]['like_price'] + '" top_price="'+datas.sort[i]['top_price']+ '">' +
								datas.sort[i]['name'] + '</option>';
						}
						$("#sort").html(sorthh);
						$(".mui-title").html(datas.title.name + ' - 入驻发布');


						//地区
						mui("body").on("tap", "#address-ipt", function() {
							var adressStr = '';
							var address = '';
							//显示几层，我们要显示省、市、区，所以我们这里写三层，如果不写默认是一层
							var addressPicker = new mui.PopPicker({
								layer: 3
							});
							addressPicker.setData(cityData3);

							addressPicker.show(function(selectItems) {
								//将选择的省、市、区显示到屏幕上
								for (var i = 0; i < selectItems.length; i++) {
									adressStr += selectItems[i].text;
									address += ' ' + selectItems[i].text;
								}

								address = address.substr(1); //删除第一个字符
								document.getElementById('address-ipt').innerHTML = adressStr;
								$("#address-ipt").val(address);
							});
						});

						var title = datas.title.name;
						console.log('标题' + title)
						//封面图
						document.getElementById('fm-img-click').addEventListener('tap', function() {

							if (mui.os.plus) {
								var buttonTit = [{
									title: "拍照"
								}, {
									title: "从手机相册选择"
								}];

								plus.nativeUI.actionSheet({
									title: "上传图片",
									cancel: "取消",
									buttons: buttonTit
								}, function(b) { /*actionSheet 按钮点击事件*/
									switch (b.index) {
										case 0:
											break;
										case 1:
											getImageUP("fm"); /*拍照*/

											break;
										case 2:
											galleryImgUP(1, "fm"); /*打开相册*/

											break;
										default:
											break;
									}
								})
							}
						});
						//封面点击上传图片
						mui("body").on("tap", ".fm-ck", function() {
							plus.nativeUI.showWaiting();
							// if(title == '招聘转让' || title == '便民家政')
							if (!$(".fm-ys").attr("src")) {
								plus.nativeUI.closeWaiting();
								mui.toast('请上传图片后在点击确定');
							}
							var base_fm = getBase64Image($(".fm-ys")[0]);
							dealImage({
								base64: base_fm,
								w: 800,
								callback: function(base64) {

									mui.ajax(APIPATH + 'Enter/fm_img', {
										data: {
											fm_img: base64
										},
										dataType: 'json', //服务器返回json格式数据
										type: 'post', //HTTP请求类型
										timeout: 10000, //超时时间设置为10秒；
										// headers:{'Content-Type':'application/json'},
										success: function(data) {
											console.log('封面图上传成功：' + JSON.stringify(data))
											$(".fm-ys").attr("val", data.data);
											$(".fm-ck").html("图片已上传");
											$(".fm-ck").attr("class", "fm-ck-gq");
											plus.nativeUI.closeWaiting();
										},
										error: function(xhr, type, errorThrown) {
											//异常处理；
											console.log('封面图上传失败：' + JSON.stringify(xhr))
										}
									});

								}
							});
						})
						mui("body").on("tap", ".fm-ck-gq", function() {

							mui.toast("已上传");
						})
						//详情
						document.getElementById('xq-img-click').addEventListener('tap', function() {
							if (mui.os.plus) {
								var buttonTit = [{
									title: "拍照"
								}, {
									title: "从手机相册选择"
								}];

								plus.nativeUI.actionSheet({
									title: "上传图片",
									cancel: "取消",
									buttons: buttonTit
								}, function(b) { /*actionSheet 按钮点击事件*/
									switch (b.index) {
										case 0:
											break;
										case 1:
											getImageUP("xq"); /*拍照*/
											break;
										case 2:
											// galleryImgUP(1, "xq"); /*打开相册*/
											var num = 3 - $("xq-ys").length;
											galleryImgUP(num, "xqadd"); /*打开相册*/
											break;
										default:
											break;
									}
								})
							}
						});
						//点击上传图片
						mui("body").on("tap", ".xq-btn", function() {
							plus.nativeUI.showWaiting();
							var imgarr = $(".xq-ys");
							if (!imgarr.length) {
								plus.nativeUI.closeWaiting();
								mui.toast('请上传图片后在点击确定');
							}
							var weizhi = [i];
							for (i = 0; i < imgarr.length; i++) {

								var base_xq = getBase64Image(imgarr[i])

								dealImage({
									base64: base_xq,
									w: 800,
									callback: function(base64) {

										mui.ajax(APIPATH + 'Enter/xq_img', {
											data: {
												xq_img: base64
											},
											dataType: 'json', //服务器返回json格式数据
											type: 'post', //HTTP请求类型
											timeout: 10000, //超时时间设置为10秒；
											// headers:{'Content-Type':'application/json'},
											success: function(data) {
												console.log('详情图上传成功：' + JSON.stringify(data))
												// var val = $(".lbt-btn").attr("val");
												// $(".lbt-btn").attr("val", val + "," + data.data);
												// $(".lbt-btn").html("图片已上传");
												// $(".lbt-btn").attr("class", "lbt-btn lbt-btn-gq");
												// plus.nativeUI.closeWaiting();
												var val = $(".xq-btn").attr("val");
												$(".xq-btn").attr("val", val + "," + data.data);
												$(".xq-btn").html("图片已上传");
												$(".xq-btn").attr("class", "xq-btn xq-btn-gq");
												plus.nativeUI.closeWaiting();
											},
											error: function(xhr, type, errorThrown) {
												//异常处理；
												console.log('详情图上传失败：' + JSON.stringify(xhr))
											}
										});

									}
								});
							}
							var base_xq = getBase64Image($(".xq-ys")[0]);
							dealImage({
								base64: base_xq,
								w: 800,
								callback: function(base64) {

									mui.ajax(APIPATH + 'Enter/xq_img', {
										data: {
											xq_img: base64
										},
										dataType: 'json', //服务器返回json格式数据
										type: 'post', //HTTP请求类型
										timeout: 10000, //超时时间设置为10秒；
										// headers:{'Content-Type':'application/json'},
										success: function(data) {
											console.log('详情图上传成功：' + JSON.stringify(data))
											$(".xq-ys").attr("val", data.data);
											$(".xq-ck").html("图片已上传");
											$(".xq-ck").attr("class", "xq-ck-gq");
											plus.nativeUI.closeWaiting();
										},
										error: function(xhr, type, errorThrown) {
											//异常处理；
											console.log('详情图上传失败：' + JSON.stringify(xhr))
										}
									});


								}
							});
						})
						mui("body").on("tap", ".xq-ck-gq", function() {
							mui.toast("已上传");
						})
						// 轮播图
						document.getElementById('lbt-img-click').addEventListener('tap', function() {
							if (mui.os.plus) {
								var buttonTit = [{
									title: "拍照"
								}, {
									title: "从手机相册选择"
								}];

								plus.nativeUI.actionSheet({
									title: "上传图片",
									cancel: "取消",
									buttons: buttonTit
								}, function(b) { /*actionSheet 按钮点击事件*/
									switch (b.index) {
										case 0:
											break;
										case 1:

											getImageUP("add"); /*拍照*/
											break;
										case 2:
											var num = 4 - $("lbt-ys").length;
											galleryImgUP(num, "add"); /*打开相册*/

											break;
										default:
											break;
									}
								})
							}

						});

						mui("body").on("tap", ".lbt-btn", function() {
							plus.nativeUI.showWaiting();

							var imgarr = $(".lbt-ys");
							if (!imgarr.length) {
								plus.nativeUI.closeWaiting();
								mui.toast('请上传图片后在点击确定');
							}
							var weizhi = [i];
							for (i = 0; i < imgarr.length; i++) {

								var base_lbt = getBase64Image(imgarr[i])

								dealImage({
									base64: base_lbt,
									w: 800,
									callback: function(base64) {

										mui.ajax(APIPATH + 'Enter/lbt_img', {
											data: {
												lbt_img: base64
											},
											dataType: 'json', //服务器返回json格式数据
											type: 'post', //HTTP请求类型
											timeout: 10000, //超时时间设置为10秒；
											// headers:{'Content-Type':'application/json'},
											success: function(data) {
												console.log('轮播图上传成功：' + JSON.stringify(data))
												var val = $(".lbt-btn").attr("val");
												$(".lbt-btn").attr("val", val + "," + data.data);
												$(".lbt-btn").html("图片已上传");
												$(".lbt-btn").attr("class", "lbt-btn lbt-btn-gq");
												plus.nativeUI.closeWaiting();
											},
											error: function(xhr, type, errorThrown) {
												//异常处理；
												console.log('轮播图上传失败：' + JSON.stringify(xhr))
											}
										});

									}
								});
							}
						})

						mui("body").on("tap", ".lbt-btn-gq", function() {
							mui.toast("已上传");
						})


						mui("body").on("tap", "#fabu-click", function() {

							var title = $("input[name=title]").val(); //标题
							var corporate = $("input[name=corporate]").val(); //公司
							var phone = $("input[name=phone]").val(); //联系电话
							var zisort = $("#sort").val(); //子分类
							var area = $("input[name=area]").val(); //位置
							var address = $("input[name=address-detail]").val(); //详细位置
							var depict = $("input[name=depict]").val(); //描述

							// var start_time = $("input[name=start-date]").val();
							// var end_time = $("input[name=end-date]").val();
							var month = $('#settle-date option:selected').val();
							
							var is_top = $('#is-top option:selected').val();
							var top_month = $('#top-month option:selected').val();
							var top_start_time = $("input[name=top-start-date]").val();
							
							var is_like = $('#is-like option:selected').val();
							var like_month = $('#like-month option:selected').val();
							var like_start_time = $("input[name=like-start-date]").val();
							
							var rent = document.getElementById("money");
							var total = rent.innerHTML;
					
							// 							var fmif = $("#fm-img-click").attr("upimg");
							// 							var xqif = $("#xq-img-click").attr("upimg");

							if (zisort !== '-1') {
								plus.nativeUI.showWaiting();
								//把封面图转换成base64

								var base_fm = $(".fm-ys").attr("val");

								//把详情图转换成base64
								var base_xq = '';
								if ($(".xq-ys").attr("val")) {
									base_xq = $(".xq-ys").attr("val");
								}

								//把轮播图转换成base64
								var base_lbt = '';
								var base_lbt_img_str = '';
								var base_lbt_img = '';
								if ($(".lbt-btn-gq").attr("val")) {
									base_lbt = $(".lbt-btn-gq").attr("val");
									base_lbt_img_str = base_lbt.substring(1);
									base_lbt_img = base_lbt_img_str.replace(/^\s*|\s*$/g, "");
								}



								mui.ajax(APIPATH + 'Enter/enter', {
									data: {
										token: token,
										sort_id: sort,
										zisort_id: zisort,
										corporate: corporate,
										title: title,
										phone: phone,
										area: area,
										address: address,
										depict: depict,
										fm_img: base_fm,
										xq_img: base_xq,
										lbt_img: base_lbt_img,

										// start_time:start_time,
										// end_time:end_time,
										month:month,
										
										is_top: is_top,
										top_month:top_month,
										top_start_time:top_start_time,
										
										is_like:is_like,
										like_month:like_month,
										like_start_time:like_start_time,
										total:total
									},
									dataType: 'json', //服务器返回json格式数据
									type: 'post', //HTTP请求类型
									timeout: 10000, //超时时间设置为10秒；
									// headers:{'Content-Type':'application/json'},
									success: function(data) {
										console.log('发布成功：' + JSON.stringify(data))
										if (data.status == '1') { //发布成功
											plus.nativeUI.closeWaiting();
											mui.toast(data.msg);
											// setTimeout(function(){
											// 	mui.back();
											// },500);
											// 支付租金
											var rent = document.getElementById("money");
											var money = rent.innerHTML;

											console.log('租金' + money)
											if (parseFloat(money) > 0) {
												mui.alert('入驻需要支付相应的租金', '温馨提示', function() {
													mui('#popover').popover("show");
												});
											}
										} else {
											plus.nativeUI.closeWaiting();
											mui.toast(data.msg);
										}

									},
									error: function(xhr, type, errorThrown) {
										//异常处理；
										console.log('发布失败：' + JSON.stringify(xhr))
									}
								});


							} else {


								mui.toast('请选择店铺类型');
							}


						})
						plus.nativeUI.closeWaiting();
					},
					error: function(xhr, type, errorThrown) {
						//异常处理；
						console.log(type);
					}
				});
				// 立即支付
				mui("body").on('tap', '#bt-fk', function() {
					pay();
				});

				function pay() {
					var wxChannel = null; // 微信支付
					var aliChannel = null; // 支付宝支付
					var channel = null;
					// 获取支付通道
					plus.payment.getChannels(function(channels) {
						console.log('选择支付方式：' + JSON.stringify(channels))
						aliChannel = channels[0];
						wxChannel = channels[1];
					}, function(e) {
						mui.toast("获取支付通道失败：" + e.message);
					});
					// 支付方式
					var tcval = $("input[name=payment]:checked").val();
					console.log('支付方式:' + tcval);
					// 支付租金
					var rent = document.getElementById("money");
					var totalprice = rent.innerHTML;

					var token = window.localStorage.getItem('qztc');
					
					mui.ajax(APIPATH + 'enter/enter_pay', {
						data: {
							token:token,
							type: tcval,
							money: totalprice
						},
						dataType: 'json', //服务器返回json格式数据
						type: 'post', //HTTP请求类型
						timeout: 10000, //超时时间设置为10秒；
						// headers:{'Content-Type':'application/json'},
						success: function(data) {
							console.log('支付租金：' + JSON.stringify(data))
							if (data.status == 200) {
								var xmlres = data.data;
								var payChannel = aliChannel;
								if (tcval == 1) {
									xmlres = data.data;
									payChannel = aliChannel;
								} else if (tcval == 2) {
									xmlres = JSON.stringify(data.data);
									payChannel = wxChannel;
								}

								plus.payment.request(payChannel, xmlres, function(result) {
									plus.nativeUI.alert("支付成功！", function() {
										mui('#yezftc').popover("hide");
										window.localStorage.removeItem('order');
										plus.webview.close(plus.webview.currentWebview());
										mui.openWindow({
											url: '../shoppingCart/payment-success.html',
											extras: {
												"totalprice": totalprice
											}
										});
									});
								}, function(error) {
									console.log("支付没有成功" + JSON.stringify(error))
									mui.toast("支付没有成功");
								});
							} else {
								mui.toast('获取订单信息失败');
							}
							plus.nativeUI.closeWaiting();
						},
						error: function(xhr, type, errorThrown) {
							//异常处理；
							console.log('支付租金失败：' + JSON.stringify(xhr))
						}
					});
				}

				// 开始日期选择
				// mui("body").on("tap", ".start-date", function() {
				// 	var dDate = new Date();
				// 	//设置当前日期（不设置默认当前日期）
				// 	// dDate.setFullYear(2016, 7, 16);
				// 	var minDate = new Date();
				// 	//最小时间
				// 	minDate.setFullYear(2000, 1, 1);
				// 	var maxDate = new Date();
				// 	//最大时间
				// 	maxDate.setFullYear(2100, 12, 31);
				// 	plus.nativeUI.pickDate(function(e) {
				// 		var d = e.date;
				// 		var start_date = d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate();
				// 		document.getElementById('start-date').innerHTML = start_date;
				// 		$("#start-date").val(start_date);
				// 	}, function(e) {
				// 		mui.toast("您没有选择日期");
				// 	}, {
				// 		title: '请选择日期',
				// 		date: dDate,
				// 		minDate: minDate,
				// 		maxDate: maxDate
				// 	});
				// });
				// 结束日期选择
				// mui("body").on("tap", ".end-date", function() {
				// 	var dDate = new Date();
				// 	//设置当前日期（不设置默认当前日期）
				// 	// dDate.setFullYear(2016, 7, 16);
				// 	var minDate = new Date();
				// 	//最小时间
				// 	minDate.setFullYear(2000, 1, 1);
				// 	var maxDate = new Date();
				// 	//最大时间
				// 	maxDate.setFullYear(2100, 12, 31);
				// 	plus.nativeUI.pickDate(function(e) {
				// 		var d = e.date;
				// 		var end_date = d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate();

				// 		document.getElementById('end-date').innerHTML = end_date;
				// 		$("#end-date").val(end_date);
				// 	}, function(e) {
				// 		mui.toast("您没有选择日期");
				// 	}, {
				// 		title: '请选择日期',
				// 		date: dDate,
				// 		minDate: minDate,
				// 		maxDate: maxDate
				// 	});
				// });
				// 置顶开始
				mui("body").on("tap", "#top-start-date", function() {
					var dDate = new Date();
					//设置当前日期（不设置默认当前日期）
					// dDate.setFullYear(2016, 7, 16);
					var minDate = new Date();
					//最小时间
					minDate.setFullYear(2000, 1, 1);
					var maxDate = new Date();
					//最大时间
					maxDate.setFullYear(2100, 12, 31);
					plus.nativeUI.pickDate(function(e) {
						var d = e.date;
						var date = d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate();

						document.getElementById('top-start-date').innerHTML = date;
						$("#top-start-date").val(date);
					}, function(e) {
						mui.toast("您没有选择日期");
					}, {
						title: '请选择日期',
						date: dDate,
						minDate: minDate,
						maxDate: maxDate
					});
				});
				// 猜你喜欢开始
				mui("body").on("tap", "#like-start-date", function() {
					var dDate = new Date();
					//设置当前日期（不设置默认当前日期）
					// dDate.setFullYear(2016, 7, 16);
					var minDate = new Date();
					//最小时间
					minDate.setFullYear(2000, 1, 1);
					var maxDate = new Date();
					//最大时间
					maxDate.setFullYear(2100, 12, 31);
					plus.nativeUI.pickDate(function(e) {
						var d = e.date;
						var date = d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate();

						document.getElementById('like-start-date').innerHTML = date;
						$("#like-start-date").val(date);
					}, function(e) {
						mui.toast("您没有选择日期");
					}, {
						title: '请选择日期',
						date: dDate,
						minDate: minDate,
						maxDate: maxDate
					});
				});

			});
			var is_top = [{id:1,name:'是'},{id:0,name:'否'}];
			var is_top_html = '<option value ="-1">请选择</option>';
			for (i = 0; i < is_top.length; i++) {
				is_top_html += '<option value ="' + is_top[i]['id']+'">' + is_top[i]['name']+ '</option>';
			}
			$("#is-top").html(is_top_html);
			$("#is-like").html(is_top_html);
			// 店铺分类
			function storeTypeChange(){
				var sort = document.getElementById("sort");
				var index = sort.options.selectedIndex - 1;
				// console.log('选择的：'+index);
				ruzhu_list = sort_list[index].ruzhu_list;
				top_list = sort_list[index].top_list;
				like_list = sort_list[index].like_list;
				// console.log(JSON.stringify(sort_list[index]));
				// 入住
				var settle_html = '<option value ="0">请选择入驻月数</option>';
				for (i = 0; i < ruzhu_list.length; i++) {
					settle_html += '<option value ="' + ruzhu_list[i]['month'] + '" price="'+ruzhu_list[i]['price']+ '">' + ruzhu_list[i]['title']+ '('+ ruzhu_list[i]['price'] +')' + '</option>';
				}
				$("#settle-date").html(settle_html);
				// 置顶
				var top_html = '<option value ="0">请选择置顶月数</option>';
				for (i = 0; i < top_list.length; i++) {
					top_html += '<option value ="' + top_list[i]['month'] + '" price="'+top_list[i]['price'] + '">' + top_list[i]['title'] + '('+ top_list[i]['price'] +')' + '</option>';
				}
				$("#top-month").html(top_html);
				//猜你喜欢
				var like_html = '<option value ="0">请选择猜你喜欢月数</option>';
				for (i = 0; i < like_list.length; i++) {
					like_html += '<option value ="' + like_list[i]['month']+ '" price="'+like_list[i]['price'] + '">' + like_list[i]['title'] + '('+ like_list[i]['price'] +')' + '</option>';
				}
				$("#like-month").html(like_html);
			}
			//计算总金额
			function calculateMoneyChange(){
				var settle_money = 0;
				var top_money = 0;
				var like_money = 0;
				// 入住
				var settle_sel = document.getElementById('settle-date');
				var settle_price = settle_sel.options[settle_sel.selectedIndex].getAttribute("price");//入驻月租金
				var settle_month = $('#settle-date option:selected').val();//入驻月租金
				if(settle_price == null){
					settle_price = 0;
				}
				settle_money = parseFloat(settle_price) * parseInt(settle_month);
				console.log('入住月租金:'+settle_price+'月数'+settle_month);
				
				var is_top = $('#is-top option:selected').val();//是否置顶
				var is_like = $('#is-like option:selected').val();//是否猜你喜欢
				// 置顶
				if(is_top == 1){
					var top_sel = document.getElementById('top-month');
					var top_price = top_sel.options[top_sel.selectedIndex].getAttribute("price");//入驻月租金
					var top_month = $('#top-month option:selected').val();//入驻月租金
					if(top_price == null){
						top_price = 0;
					}
					top_money = parseFloat(top_price) * parseInt(top_month);
					console.log('置顶月租金:'+top_price+'月数'+top_month);
				}
				// 猜你喜欢
				if(is_like == 1){
					var like_sel = document.getElementById('like-month');
					var like_price = like_sel.options[like_sel.selectedIndex].getAttribute("price");//入驻月租金
					var like_month = $('#like-month option:selected').val();//入驻月租金
					if(like_price == null){
						like_price = 0;
					}
					like_money = parseFloat(like_price) * parseInt(like_month);
					console.log('猜你喜欢月租金:'+like_price+'月数'+like_month);
				}
				var total = parseFloat(settle_money) + parseFloat(top_money) + parseFloat(like_money);
				
				$('.rent-money').html(total.toFixed(2));
				// var top_price = sel1.options[sel1.selectedIndex].getAttribute("top_price");//置顶月租金
				// var like_price = sel1.options[sel1.selectedIndex].getAttribute("like_price");//猜你喜欢月租金

				// console.log('入驻租金：'+price+'置顶租金：'+top_price+'猜你喜欢租金：'+like_price);

				// var settle_month = $('#settle-date option:selected').val();//入驻月数
				// var top_month = $('#top-month option:selected').val();//置顶月数
				// var like_month = $('#like-month option:selected').val();//入驻月数

				// console.log('入驻月数：'+ settle_month +'置顶月数：'+top_month+'猜你喜欢月数：'+like_month);

				// // var is_settle = $('#settle-date option:selected').val();//入驻月数
				// var is_top = $('#is-top option:selected').val();//是否置顶
				// var is_like = $('#is-like option:selected').val();//是否猜你喜欢

				// console.log('是否置顶：'+is_top+'是否猜你喜欢：'+ is_like);


		
				

				// if(is_top == 1){
				// 	top_money = parseFloat(top_price) * parseInt(top_month);
				// }

				// if(is_like == 1){
				// 	like_money = parseFloat(like_price) * parseInt(like_month);
				// }

				// console.log('入驻金额：'+ settle_money +'置顶金额：'+top_money+'猜你喜欢金额：'+like_money);

			}
		</script>
	</body>

</html>
